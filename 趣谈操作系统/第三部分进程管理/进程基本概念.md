僵尸进程：子进程终止了，但是父进程没有回收子进程的资源PCB。使其成为僵尸进程

孤儿进程：父进程先与子进程结束了，使得子进程失去了父进程，这个时候子进程会被1号进程init进程领养，成为孤儿进程。

<https://www.cnblogs.com/13224ACMer/p/6390702.html>



#### 进程间通信

（1）管道（pipe）及有名管道（named pipe）：管道可用于具有亲缘关系的父子进程间的通信，有名管道除了具有管道所具有的功能外，它还允许无亲缘关系进程间的通信。

  （2）信号（signal）：信号是在软件层次上对中断机制的一种模拟，它是比较复杂的通信方式，用于通知进程有某事件发生，一个进程收到一个信号与处理器收到一个中断请求效果上可以说是一致的。

  （3）消息队列（message queue）：消息队列是消息的链接表，它克服了上两种通信方式中信号量有限的缺点，具有写权限得进程可以按照一定得规则向消息队列中添加新信息；对消息队列有读权限得进程则可以从消息队列中读取信息。

  （4）共享内存（shared memory）：可以说这是最有用的进程间通信方式。它使得多个进程可以访问同一块内存空间，不同进程可以及时看到对方进程中对共享内存中数据得更新。这种方式需要依靠某种同步操作，如互斥锁和信号量等。

  （5）信号量（semaphore）：主要作为进程之间及同一种进程的不同线程之间得同步和互斥手段。

  （6）套接字（socket）：这是一种更为一般得进程间通信机制，它可用于网络中不同机器之间的进程间通信，应用非常广泛。







# 信号量查看方法

#### 方法如下：

ipcs    

​        -s 查看具体使用情况

​         -u 可查看大致使用情况 

​          -l 列出信号量系统配置参数值

lsipc

​          -s 查看信号量具体使用情况

​           不解参数，或-l ，查看信号量大致使用情况 ，系统配置参数值 



#### 设置信号量：

编辑/etc/sysctl.conf

添加 sem行如下：

kernel.sem=250  22000 250  88

字段意义如下：

这四个数字分别是：SEMMSL，SEMMNS，SEMOPM，SEMMNI

SEMMSL：内核参数，控制每个信号量集合的最大信号数。

SEMMNS：内核参数，控制系统范围内能使用的最大信号量数。

SEMOPM：semop()函数（内核函数，用来操作信号量）每次调用锁能操作的一个信号量集中的最大信号量。

SEMMNI：内核中信号量集的最大数量。



一般计算方法：

SEMMNS=SEMMSL*SEMMNI

SEMOPM=SEMMSL，这两个参数一般设置为相同。

对于PostgreSQL数据库来说：

SEMMNI >= ceil((max_connections + autovacuum_max_workers + 4) / 16)

SEMMSL >= 17

#### 示例

假设一个PG库如下设置：

max_connections=1000, autovacuum_max_workers =3,

则这几个参数的设置是：

SEMMNI = ceil（（1000+3+4））/16)=63,因为考虑到其他进程使用，一般设置为63+25=88

SEMMSL要求大于17,保持默认250

SEMOPM=SEMSL=250

SEMMNS=SEMMNI*MSMMSL=88*250=22000

在/etc/sysctl.conf文件中添加：

kernel.sem=250  22000 250  88

设置完，执行sysctl -p生效。

#### 参考链接

https://www.cnblogs.com/wangss/p/6502804.html

